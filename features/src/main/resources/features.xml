<?xml version="1.0" encoding="UTF-8"?>
<features xmlns="http://karaf.apache.org/xmlns/features/v1.3.0" name="microbule-${project.version}">

    <repository>mvn:org.apache.cxf.karaf/apache-cxf/${cxf.version}/xml/features</repository>

    <feature name="microbule" version="${project.version}">
        <feature version="${project.version}">microbule-core</feature>
        <feature version="${project.version}">microbule-errormap</feature>
        <feature version="${project.version}">microbule-decorator-errormap</feature>
        <feature version="${project.version}">microbule-decorator-gson</feature>
        <feature version="${project.version}">microbule-decorator-validation</feature>
        <feature version="${project.version}">microbule-decorator-cors</feature>
        <feature version="${project.version}">microbule-decorator-tracer</feature>
        <feature version="${project.version}">microbule-decorator-requestlog</feature>
        <feature version="${project.version}">microbule-decorator-circuitbreaker</feature>
        <feature version="${project.version}">microbule-decorator-cache</feature>
    </feature>

    <!--
    Microbule Core
    -->
    <feature name="microbule-core" version="${project.version}">
        <feature version="${cxf.version}">cxf-jaxrs</feature>
        <feature version="${cxf.version}">cxf-rs-description-swagger2</feature>
        <feature version="${eos.version}">eos-core</feature>
        <bundle>mvn:org.microbule/microbule-annotation/${project.version}</bundle>
        <bundle>mvn:org.microbule/microbule-api/${project.version}</bundle>
        <bundle>mvn:org.microbule/microbule-spi/${project.version}</bundle>
        <bundle>mvn:org.microbule/microbule-core/${project.version}</bundle>
        <bundle>mvn:org.microbule/microbule-osgi/${project.version}</bundle>
    </feature>

    <feature name="microbule-errormap" version="${project.version}">
        <bundle>mvn:org.microbule/microbule-errormap-api/${project.version}</bundle>
        <bundle>mvn:org.microbule/microbule-errormap-spi/${project.version}</bundle>
        <bundle>mvn:org.microbule/microbule-errormap-impl/${project.version}</bundle>
    </feature>
    <!--
    Decorators
    -->
    <feature name="microbule-decorator-gson" version="${project.version}">
        <feature version="${eos.version}">eos-core</feature>
        <bundle>mvn:com.google.code.gson/gson/${gson.version}</bundle>
        <bundle>mvn:org.microbule/microbule-decorator-gson/${project.version}</bundle>
    </feature>

    <feature name="microbule-decorator-cors" version="${project.version}">
        <bundle>mvn:org.microbule/microbule-decorator-cors/${project.version}</bundle>
    </feature>

    <feature name="microbule-decorator-cache" version="${project.version}">
        <bundle>mvn:org.microbule/microbule-decorator-cache/${project.version}</bundle>
    </feature>

    <feature name="microbule-decorator-validation" version="${project.version}">
        <bundle>mvn:javax.validation/validation-api/${validation.api.version}</bundle>
        <bundle>mvn:org.jboss.logging/jboss-logging/${jboss.logging.version}</bundle>
        <bundle>mvn:com.fasterxml/classmate/${classmate.version}</bundle>
        <bundle>mvn:javax.el/javax.el-api/${javax.el.api.version}</bundle>
        <bundle>mvn:org.glassfish.web/javax.el/${glassfish.el.version}</bundle>
        <bundle>mvn:org.hibernate/hibernate-validator/${hibernate.validator.version}</bundle>
        <bundle>mvn:org.microbule/microbule-decorator-validation/${project.version}</bundle>
    </feature>

    <feature name="microbule-decorator-errormap" version="${project.version}">
        <feature version="${eos.version}">eos-core</feature>
        <bundle>mvn:org.microbule/microbule-decorator-errormap/${project.version}</bundle>
    </feature>

    <feature name="microbule-decorator-tracer" version="${project.version}">
        <feature version="${eos.version}">eos-core</feature>
        <bundle>mvn:org.microbule/microbule-decorator-tracer/${project.version}</bundle>
    </feature>

    <feature name="microbule-decorator-circuitbreaker" version="${project.version}">
        <bundle>mvn:org.microbule/microbule-decorator-circuitbreaker/${project.version}</bundle>
    </feature>

    <feature name="eos-core" version="${eos.version}">
        <bundle>mvn:com.google.guava/guava/${guava.version}</bundle>
        <bundle>mvn:org.apache.commons/commons-lang3/${commons.lang3.version}</bundle>
        <bundle>mvn:com.savoirtech.eos/eos-core/${eos.version}</bundle>
    </feature>

    <feature name="microbule-decorator-requestlog" version="${project.version}">
        <bundle>mvn:org.microbule/microbule-decorator-requestlog/${project.version}</bundle>
    </feature>

    <!--
    Examples
    -->
    <feature name="microbule-examples" version="${project.version}">
        <feature version="${project.version}">microbule</feature>
        <feature version="${project.version}">microbule-example-blueprint</feature>
        <feature version="${project.version}">microbule-example-scr</feature>
        <feature version="${project.version}">microbule-example-cdi</feature>
    </feature>

    <feature name="microbule-example-blueprint" version="${project.version}">
        <feature version="${project.version}">microbule</feature>
        <bundle>mvn:org.microbule/microbule-example-common/${project.version}</bundle>
        <bundle>mvn:org.microbule/microbule-example-blueprint/${project.version}</bundle>
    </feature>

    <feature name="microbule-example-scr" version="${project.version}">
        <feature version="${project.version}">microbule</feature>
        <feature>scr</feature>
        <bundle>mvn:org.microbule/microbule-example-common/${project.version}</bundle>
        <bundle>mvn:org.microbule/microbule-example-scr/${project.version}</bundle>
    </feature>

    <feature name="microbule-example-cdi" version="${project.version}">
        <feature version="${project.version}">microbule</feature>
        <feature>pax-cdi-1.2-weld</feature>
        <bundle>mvn:org.microbule/microbule-example-common/${project.version}</bundle>
        <bundle>mvn:org.microbule/microbule-example-cdi/${project.version}</bundle>
    </feature>


</features>
